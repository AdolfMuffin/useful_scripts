## storcli_raid_monitoring.yaml
Шаблон используется для мониторинга состояния RAID-массива и физических дисков с использованием утилиты storcli и SSH-проверок со стороны Zabbix-сервера.
Описание макросов:
{$SSH_USER} - имя пользователя.
{$SSH_PW} - пароль.
{$SCRIPT_PATH} - абсолютный путь до скрипта в системе, где он будет исполняться, по умолчанию скрипт располагается в корне. В ином случае необходимо переопределить значение макроса.
{$STORCLI} - абсолютный путь до утилиты storcli на целевой системе. Необходимость наличия этого макроса обусловлена тем, что в разных системах эта утилита может быть расположена в разных местах.
{$SUDO} - в некоторых случаях утилита storcli может быть выполнена только с использованием sudo, в таком случае значение макроса необходимо выставить sudo. По умолчанию, пусто. Например, сервисные учетные записи в TrueNAS/FreeNAS требуют права sudo (с отключенным подтверждением пароля в visudo), а исполняемая среда ESXi не имеет sudo вообще. Поэтому этот функционал был вынесен в макрос.

Исполняемая среда ESXi очищается после перезагрузки, поэтому был добавлен метод автоматического копирования скрипта disk_discovery.sh с Zabbix-сервера на удаленные хосты.
Необходимо разместить скрипт scp_to_esxi.sh в директории External scripts на вашем Zabbix-сервере, а также где-то в систему разместить сам файл disk_discovery.sh и указать абсолютный путь до него в макросе {$LOCAL_PATH}.
Данный функционал не обязательный, но в таком случае будет необходимо руками добавлять скрипт disk_discovery.sh на каждый хост.

Рекомендуется не указывать учетные данные пользователя root в Zabbix, а создать для этого отдельную сервисную УЗ с ограниченными правами.